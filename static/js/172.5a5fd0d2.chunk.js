"use strict";(self.webpackChunkmy_app1=self.webpackChunkmy_app1||[]).push([[172],{4172:function(t,s,e){e.r(s),e.d(s,{default:function(){return B}});var r=e(1413),i=e(5671),o=e(3144),n=e(136),a=e(3668),u=e(2791),p="ProfileInfo_photoBlock__HpWgz",l="ProfileInfo_descriptionBlock__rQo20",c="ProfileInfo_userPhoto__wxBp2",h=e(5739),d=e(885),f=e(184),v=function(t){var s=(0,u.useState)(!1),e=(0,d.Z)(s,2),r=e[0],i=e[1],o=(0,u.useState)(t.status),n=(0,d.Z)(o,2),a=n[0],p=n[1];(0,u.useEffect)((function(){p(t.status)}),[t.status]);return(0,f.jsxs)("div",{children:[!r&&(0,f.jsx)("div",{children:(0,f.jsx)("span",{onDoubleClick:function(){i(!0)},children:t.status})}),r&&(0,f.jsx)("div",{children:(0,f.jsx)("input",{autoFocus:!0,onBlur:function(){i(!1),t.updateStatus(a)},onChange:function(t){p(t.currentTarget.value)},value:a})})]})},x=e(8478),m=function(t){if(!t.profile)return(0,f.jsx)(h.Z,{});var s="photo_".concat(t.profile.userId);return(0,f.jsxs)("div",{children:[(0,f.jsx)("div",{className:p,children:(0,f.jsx)("img",{src:"https://html5css.ru/css/img_forest.jpg",alt:"photo555"})}),(0,f.jsxs)("div",{className:l,children:[(0,f.jsx)("img",{src:null!==t.profile.photos.small?t.profile.photos.small:x,className:c,alt:s}),"...Avatar - ",t.profile.fullName," - userId - ",t.profile.userId,(0,f.jsx)("div",{children:t.isOwner&&(0,f.jsx)("input",{type:"file",onChange:function(s){s.target.files.length&&t.savePhoto(s.target.files[0])}})}),(0,f.jsx)(v,{status:t.status,updateStatus:t.updateStatus})]})]})},j=e(7581),P=e(6070),g=e(2982),_="MyPosts_postsBlock__tpHam",S="MyPosts_posts__sKDcq",y="MyPosts_text_h3__wvADx",k="Post_item__C5ylc",Z=function(t){return(0,f.jsxs)("div",{className:k,children:[(0,f.jsx)("img",{src:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQ4AuCaCDS8eeLRXGL0pFD9cIddYuHc8AJoSA&usqp=CAU",alt:"Post-illustration"}),"... ",t.value,(0,f.jsxs)("div",{children:["Like ",t.likesCount]})]})},w=e(5705),C=e(132),I=e(5304),A=function(t){var s=C.Ry().shape({newPostText:C.Z_().min(2,"Must be longer than 2 characters !").max(5,"Must be shorter than 5 characters !").required("Required !")});return(0,f.jsx)(w.J9,{initialValues:{newPostText:""},validationSchema:s,onSubmit:function(s,e){var r=e.resetForm;!function(s){t.addPost(s)}(s.newPostText),r({values:""})},children:function(){return(0,f.jsxs)(w.l0,{children:[(0,f.jsx)("div",{children:(0,f.jsx)(w.gN,{name:"newPostText",as:"textarea",placeholder:"enter text 1"})}),(0,f.jsx)(w.Bc,{name:"newPostText",children:I.Y}),(0,f.jsx)("button",{type:"submit",children:"Add posts"})]})}})},M=function(t){var s=(0,g.Z)(t.posts).reverse().map((function(t){return(0,f.jsx)(Z,{value:t.message,likesCount:t.likesCount},t.id)}));return(0,f.jsxs)("div",{className:_,children:[(0,f.jsx)("h3",{className:y,children:"My posts:"}),(0,f.jsx)(A,{addPost:t.addPost}),(0,f.jsx)("div",{className:S,children:s})]})},N=(0,j.$j)((function(t){return{posts:t.profilePage.posts}}),(function(t){return{addPost:function(s){t((0,P.Wl)(s))}}}))(M),U=function(t){(0,n.Z)(e,t);var s=(0,a.Z)(e);function e(){return(0,i.Z)(this,e),s.apply(this,arguments)}return(0,o.Z)(e,[{key:"render",value:function(){return(0,f.jsxs)("div",{children:[(0,f.jsx)(m,(0,r.Z)({},this.props)),(0,f.jsx)(N,{})]})}}]),e}(u.Component),b=U,D=e(819),T=e(7781),q=function(t){(0,n.Z)(e,t);var s=(0,a.Z)(e);function e(t){var r;return(0,i.Z)(this,e),(r=s.call(this,t)).state={isShowMyProfile:!0},r}return(0,o.Z)(e,[{key:"componentDidMount",value:function(){var t=+this.props.router.params.userId,s=this.props.authorisedUserId;t?(this.props.getUserProfile(t),this.props.getStatus(t)):this.props.isAuth&&(this.props.getUserProfile(s),this.props.getStatus(s))}},{key:"componentDidUpdate",value:function(t,s,e){var r=+this.props.router.params.userId,i=this.props.authorisedUserId;this.state.isShowMyProfile&&(r===i&&this.setState({isShowMyProfile:!1}),!r&&this.props.isAuth&&(this.props.getUserProfile(i),this.props.getStatus(i),this.setState({isShowMyProfile:!1})))}},{key:"render",value:function(){if(!this.props.isAuth&&!this.props.router.params.userId)return(0,f.jsx)(D.Fg,{to:"/login"});var t=+this.props.router.params.userId,s=this.props.authorisedUserId,e=!1;return(!t&&this.props.isAuth||t===s)&&(e=!0),(0,f.jsx)("div",{children:(0,f.jsx)(b,{profile:this.props.profile,status:this.props.status,updateStatus:this.props.updateStatus,isOwner:e,savePhoto:this.props.savePhoto})})}}]),e}(u.Component);var B=(0,T.qC)((function(t){return function(s){var e=(0,D.TH)(),i=(0,D.s0)(),o=(0,D.UO)();return(0,f.jsx)(t,(0,r.Z)((0,r.Z)({},s),{},{router:{location:e,navigate:i,params:o}}))}}),(0,j.$j)((function(t){return{profile:t.profilePage.profile,status:t.profilePage.status,authorisedUserId:t.auth.id,isAuth:t.auth.isAuth}}),{getUserProfile:P.et,getStatus:P.lR,updateStatus:P.Nf,savePhoto:P.Ju}))(q)}}]);
//# sourceMappingURL=172.5a5fd0d2.chunk.js.map