(self.webpackChunkmy_app1=self.webpackChunkmy_app1||[]).push([[458],{9458:function(n,e,t){"use strict";t.r(e),t.d(e,{default:function(){return W}});var i=t(2982),r=t(885),a=t(2791),s=t(7462),o=t(4942),c=t(5671),l=t(3144),u=t(136),p=t(7277),d=t(1694),f=t.n(d),v=t(8573),m=t.n(v),g=t(1818),h=t(1929),x=t(1113),y=t(9393),E=function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(null!=n&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(n);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(t[i[r]]=n[i[r]])}return t},N=((0,y.b)("small","default","large"),null);var S=function(n){(0,u.Z)(t,n);var e=(0,p.Z)(t);function t(n){var i;(0,c.Z)(this,t),(i=e.call(this,n)).debouncifyUpdateSpinning=function(n){var e=(n||i.props).delay;e&&(i.cancelExistingSpin(),i.updateSpinning=m()(i.originalUpdateSpinning,e))},i.updateSpinning=function(){var n=i.props.spinning;i.state.spinning!==n&&i.setState({spinning:n})},i.renderSpin=function(n){var e,t=n.direction,r=i.props,c=r.spinPrefixCls,l=r.className,u=r.size,p=r.tip,d=r.wrapperClassName,v=r.style,m=E(r,["spinPrefixCls","className","size","tip","wrapperClassName","style"]),h=i.state.spinning,y=f()(c,(e={},(0,o.Z)(e,"".concat(c,"-sm"),"small"===u),(0,o.Z)(e,"".concat(c,"-lg"),"large"===u),(0,o.Z)(e,"".concat(c,"-spinning"),h),(0,o.Z)(e,"".concat(c,"-show-text"),!!p),(0,o.Z)(e,"".concat(c,"-rtl"),"rtl"===t),e),l),S=(0,g.Z)(m,["spinning","delay","indicator","prefixCls"]),C=a.createElement("div",(0,s.Z)({},S,{style:v,className:y,"aria-live":"polite","aria-busy":h}),function(n,e){var t=e.indicator,i="".concat(n,"-dot");return null===t?null:(0,x.l$)(t)?(0,x.Tm)(t,{className:f()(t.props.className,i)}):(0,x.l$)(N)?(0,x.Tm)(N,{className:f()(N.props.className,i)}):a.createElement("span",{className:f()(i,"".concat(n,"-dot-spin"))},a.createElement("i",{className:"".concat(n,"-dot-item")}),a.createElement("i",{className:"".concat(n,"-dot-item")}),a.createElement("i",{className:"".concat(n,"-dot-item")}),a.createElement("i",{className:"".concat(n,"-dot-item")}))}(c,i.props),p?a.createElement("div",{className:"".concat(c,"-text")},p):null);if(i.isNestedPattern()){var b=f()("".concat(c,"-container"),(0,o.Z)({},"".concat(c,"-blur"),h));return a.createElement("div",(0,s.Z)({},S,{className:f()("".concat(c,"-nested-loading"),d)}),h&&a.createElement("div",{key:"loading"},C),a.createElement("div",{className:b,key:"container"},i.props.children))}return C};var r=n.spinning,l=function(n,e){return!!n&&!!e&&!isNaN(Number(e))}(r,n.delay);return i.state={spinning:r&&!l},i.originalUpdateSpinning=i.updateSpinning,i.debouncifyUpdateSpinning(n),i}return(0,l.Z)(t,[{key:"componentDidMount",value:function(){this.updateSpinning()}},{key:"componentDidUpdate",value:function(){this.debouncifyUpdateSpinning(),this.updateSpinning()}},{key:"componentWillUnmount",value:function(){this.cancelExistingSpin()}},{key:"cancelExistingSpin",value:function(){var n=this.updateSpinning;n&&n.cancel&&n.cancel()}},{key:"isNestedPattern",value:function(){return!(!this.props||"undefined"===typeof this.props.children)}},{key:"render",value:function(){return a.createElement(h.C,null,this.renderSpin)}}]),t}(a.Component);S.defaultProps={spinning:!0,size:"default",wrapperClassName:""};var C=function(n){var e=n.prefixCls,t=(0,a.useContext(h.E_).getPrefixCls)("spin",e),i=(0,s.Z)((0,s.Z)({},n),{spinPrefixCls:t});return a.createElement(S,(0,s.Z)({},i))};C.setDefaultIndicator=function(n){N=n};var b=C,j=t(8240),Z=t(184),w=function(){var n=(0,a.useState)(null),e=(0,r.Z)(n,2),t=e[0],i=e[1],s=(0,a.useState)(!1),o=(0,r.Z)(s,2),c=o[0],l=o[1];return(0,a.useEffect)((function(){var n,e=function(){console.log("close \u0441 addEventListener",(0,j.XW)()),l(!1),setTimeout(t,5e3)};function t(){void 0!==n&&(n.removeEventListener("close",e),n.close(),console.log("\u043f\u0440\u043e\u0441\u0442\u043e \u0443\u0434\u0430\u043b\u0438\u043b\u0438 \u043f\u043e\u0434\u043f\u0438\u0441\u043a\u0443",(0,j.XW)())),(n=new WebSocket("wss://social-network.samuraijs.com/handlers/ChatHandler.ashx")).addEventListener("close",e),i(n)}return t(),function(){n.removeEventListener("close",e),n.close()}}),[]),(0,Z.jsxs)("div",{children:[(0,Z.jsx)(O,{wsChannel:t}),(0,Z.jsx)(P,{wsChannel:t,setWsChannelOpen:l,isWsChannelOpen:c})]})},O=function(n){var e=n.wsChannel,t=(0,a.useState)([]),s=(0,r.Z)(t,2),o=s[0],c=s[1];return console.log(o),(0,a.useEffect)((function(){var n=function(n){var e=JSON.parse(n.data);c((function(n){return[].concat((0,i.Z)(n),(0,i.Z)(e))}))};return null===e||void 0===e||e.addEventListener("message",n),function(){null===e||void 0===e||e.removeEventListener("message",n)}}),[e]),(0,Z.jsx)("div",{style:{height:"400px",overflowY:"auto"},children:o.map((function(n,e){var t=(0,j.LT)(e);return(0,Z.jsx)(k,{message:n},t)}))})},k=function(n){var e=n.message;return(0,Z.jsxs)("div",{children:[(0,Z.jsx)("img",{src:e.photo,style:{width:"30px"},alt:e.userName}),(0,Z.jsxs)("b",{children:[" ",e.userName," - userId - ",e.userId," "]}),(0,Z.jsx)("br",{}),e.message,(0,Z.jsx)("hr",{})]})},P=function(n){var e=n.wsChannel,t=n.setWsChannelOpen,i=n.isWsChannelOpen,s=(0,a.useState)(""),o=(0,r.Z)(s,2),c=o[0],l=o[1],u=(0,a.useState)("pending"),p=(0,r.Z)(u,2),d=p[0],f=p[1];console.log(d,(0,j.XW)()),(0,a.useEffect)((function(){var n=function(){console.log("open \u0441 addEventListener",(0,j.XW)()),console.log(d),f("ready"),t(!0)};return null===e||void 0===e||e.addEventListener("open",n),function(){null===e||void 0===e||e.removeEventListener("open",n)}}),[e]);var v=function(){c?c.length>100?alert("\u041c\u043e\u0436\u043d\u043e \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u044f\u0442\u044c \u043d\u0435 \u0431\u043e\u043b\u0435\u0435 100 \u0437\u043d\u0430\u043a\u043e\u0432,\n            \u0430 \u0441\u0435\u0439\u0447\u0430\u0441 \u0443\u0436\u0435 ".concat(c.length)):(null===e||void 0===e||e.send(c),l("")):alert("\u041f\u0443\u0441\u0442\u043e\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u043d\u0435\u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c!")},m=null===e||"ready"!==d||!i;return(0,Z.jsxs)("div",{children:[(0,Z.jsx)("div",{children:(0,Z.jsx)("textarea",{style:{height:"100px",width:"250px"},onChange:function(n){l(n.target.value)},value:c,placeholder:'Press Ctrl + Enter to send a message or button "Send".\nYou can\'t send more than 100 symbols.',onKeyPress:function(n){n.ctrlKey&&"Enter"===n.code&&v()}})}),(0,Z.jsx)("div",{children:m?(0,Z.jsx)(b,{}):(0,Z.jsx)("button",{onClick:function(){v()},children:"Send"})})]})},W=function(){return(0,Z.jsx)("div",{children:(0,Z.jsx)(w,{})})}},821:function(n,e,t){var i=t(6050),r=/^\s+/;n.exports=function(n){return n?n.slice(0,i(n)+1).replace(r,""):n}},6050:function(n){var e=/\s/;n.exports=function(n){for(var t=n.length;t--&&e.test(n.charAt(t)););return t}},8573:function(n,e,t){var i=t(8092),r=t(72),a=t(2582),s=Math.max,o=Math.min;n.exports=function(n,e,t){var c,l,u,p,d,f,v=0,m=!1,g=!1,h=!0;if("function"!=typeof n)throw new TypeError("Expected a function");function x(e){var t=c,i=l;return c=l=void 0,v=e,p=n.apply(i,t)}function y(n){return v=n,d=setTimeout(N,e),m?x(n):p}function E(n){var t=n-f;return void 0===f||t>=e||t<0||g&&n-v>=u}function N(){var n=r();if(E(n))return S(n);d=setTimeout(N,function(n){var t=e-(n-f);return g?o(t,u-(n-v)):t}(n))}function S(n){return d=void 0,h&&c?x(n):(c=l=void 0,p)}function C(){var n=r(),t=E(n);if(c=arguments,l=this,f=n,t){if(void 0===d)return y(f);if(g)return clearTimeout(d),d=setTimeout(N,e),x(f)}return void 0===d&&(d=setTimeout(N,e)),p}return e=a(e)||0,i(t)&&(m=!!t.leading,u=(g="maxWait"in t)?s(a(t.maxWait)||0,e):u,h="trailing"in t?!!t.trailing:h),C.cancel=function(){void 0!==d&&clearTimeout(d),v=0,c=f=l=d=void 0},C.flush=function(){return void 0===d?p:S(r())},C}},72:function(n,e,t){var i=t(7009);n.exports=function(){return i.Date.now()}},2582:function(n,e,t){var i=t(821),r=t(8092),a=t(152),s=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,c=/^0o[0-7]+$/i,l=parseInt;n.exports=function(n){if("number"==typeof n)return n;if(a(n))return NaN;if(r(n)){var e="function"==typeof n.valueOf?n.valueOf():n;n=r(e)?e+"":e}if("string"!=typeof n)return 0===n?n:+n;n=i(n);var t=o.test(n);return t||c.test(n)?l(n.slice(2),t?2:8):s.test(n)?NaN:+n}}}]);
//# sourceMappingURL=458.e3820143.chunk.js.map