(self.webpackChunkmy_app1=self.webpackChunkmy_app1||[]).push([[458],{9458:function(n,e,t){"use strict";t.r(e),t.d(e,{default:function(){return U}});var r=t(885),i=t(2791),a=t(7462),s=t(4942),o=t(5671),c=t(3144),u=t(136),l=t(7277),p=t(1694),f=t.n(p),d=t(8573),v=t.n(d),m=t(1818),g=t(1929),h=t(1113),x=t(9393),y=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(null!=n&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]])}return t},N=((0,x.b)("small","default","large"),null);var j=function(n){(0,u.Z)(t,n);var e=(0,l.Z)(t);function t(n){var r;(0,o.Z)(this,t),(r=e.call(this,n)).debouncifyUpdateSpinning=function(n){var e=(n||r.props).delay;e&&(r.cancelExistingSpin(),r.updateSpinning=v()(r.originalUpdateSpinning,e))},r.updateSpinning=function(){var n=r.props.spinning;r.state.spinning!==n&&r.setState({spinning:n})},r.renderSpin=function(n){var e,t=n.direction,o=r.props,c=o.spinPrefixCls,u=o.className,l=o.size,p=o.tip,d=o.wrapperClassName,v=o.style,g=y(o,["spinPrefixCls","className","size","tip","wrapperClassName","style"]),x=r.state.spinning,j=f()(c,(e={},(0,s.Z)(e,"".concat(c,"-sm"),"small"===l),(0,s.Z)(e,"".concat(c,"-lg"),"large"===l),(0,s.Z)(e,"".concat(c,"-spinning"),x),(0,s.Z)(e,"".concat(c,"-show-text"),!!p),(0,s.Z)(e,"".concat(c,"-rtl"),"rtl"===t),e),u),b=(0,m.Z)(g,["spinning","delay","indicator","prefixCls"]),S=i.createElement("div",(0,a.Z)({},b,{style:v,className:j,"aria-live":"polite","aria-busy":x}),function(n,e){var t=e.indicator,r="".concat(n,"-dot");return null===t?null:(0,h.l$)(t)?(0,h.Tm)(t,{className:f()(t.props.className,r)}):(0,h.l$)(N)?(0,h.Tm)(N,{className:f()(N.props.className,r)}):i.createElement("span",{className:f()(r,"".concat(n,"-dot-spin"))},i.createElement("i",{className:"".concat(n,"-dot-item")}),i.createElement("i",{className:"".concat(n,"-dot-item")}),i.createElement("i",{className:"".concat(n,"-dot-item")}),i.createElement("i",{className:"".concat(n,"-dot-item")}))}(c,r.props),p?i.createElement("div",{className:"".concat(c,"-text")},p):null);if(r.isNestedPattern()){var E=f()("".concat(c,"-container"),(0,s.Z)({},"".concat(c,"-blur"),x));return i.createElement("div",(0,a.Z)({},b,{className:f()("".concat(c,"-nested-loading"),d)}),x&&i.createElement("div",{key:"loading"},S),i.createElement("div",{className:E,key:"container"},r.props.children))}return S};var c=n.spinning,u=function(n,e){return!!n&&!!e&&!isNaN(Number(e))}(c,n.delay);return r.state={spinning:c&&!u},r.originalUpdateSpinning=r.updateSpinning,r.debouncifyUpdateSpinning(n),r}return(0,c.Z)(t,[{key:"componentDidMount",value:function(){this.updateSpinning()}},{key:"componentDidUpdate",value:function(){this.debouncifyUpdateSpinning(),this.updateSpinning()}},{key:"componentWillUnmount",value:function(){this.cancelExistingSpin()}},{key:"cancelExistingSpin",value:function(){var n=this.updateSpinning;n&&n.cancel&&n.cancel()}},{key:"isNestedPattern",value:function(){return!(!this.props||"undefined"===typeof this.props.children)}},{key:"render",value:function(){return i.createElement(g.C,null,this.renderSpin)}}]),t}(i.Component);j.defaultProps={spinning:!0,size:"default",wrapperClassName:""};var b=function(n){var e=n.prefixCls,t=(0,i.useContext(g.E_).getPrefixCls)("spin",e),r=(0,a.Z)((0,a.Z)({},n),{spinPrefixCls:t});return i.createElement(j,(0,a.Z)({},r))};b.setDefaultIndicator=function(n){N=n};var S=b,E=t(8240),C=t(364),w=t(7437),Z=t(2840),k=t(184),P=function(){var n=(0,C.I0)(),e=(0,C.v9)((function(n){return n.chat.status}));return(0,i.useEffect)((function(){return console.log("\u0441\u0442\u0430\u0440\u0442",(0,E.XW)()),n((0,Z.WE)()),function(){n((0,Z.R7)())}}),[n]),(0,k.jsxs)("div",{children:["error"===e&&(0,k.jsx)("div",{children:" Some error occurred. Please refresh the page "}),(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(T,{}),(0,k.jsx)(I,{isAuth:!0})]})]})},T=function(){console.log(">>>Messages");var n=(0,C.v9)((function(n){return n.chat.messages})),e=(0,i.useRef)(null),t=(0,i.useState)(!0),a=(0,r.Z)(t,2),s=a[0],o=a[1];return(0,i.useEffect)((function(){s&&setTimeout((function(){var n;null===(n=e.current)||void 0===n||n.scrollIntoView({behavior:"smooth"})}),500)}),[n]),(0,k.jsxs)("div",{style:{height:"400px",overflowY:"auto"},onScroll:function(n){var e=n.currentTarget,t=e.scrollHeight-e.scrollTop;Math.abs(t-e.clientHeight)<300?s||o(!0):s&&o(!1)},children:[n.map((function(n){return(0,k.jsx)(O,{message:n},n.id)})),(0,k.jsx)("div",{ref:e})]})},O=function(n){var e=n.message;return(0,k.jsxs)("div",{children:[(0,k.jsx)("img",{src:e.photo,style:{width:"30px"},alt:e.userName}),(0,k.jsxs)("b",{children:[" ",e.userName," - userId - ",e.userId," "]}),(0,k.jsx)("br",{}),e.message,(0,k.jsx)("hr",{})]})},I=function(n){var e=n.isAuth,t=(0,i.useState)(""),a=(0,r.Z)(t,2),s=a[0],o=a[1],c=(0,C.v9)((function(n){return n.chat.status})),u=(0,C.I0)(),l="ready"!==c,p=function(){if(s){var n=new Date,e=String(n.getHours()+":"+n.getMinutes()),t="".concat(s," (").concat(e,")");t.length>100?alert("\u041c\u043e\u0436\u043d\u043e \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u044f\u0442\u044c \u043d\u0435 \u0431\u043e\u043b\u0435\u0435 100 \u0437\u043d\u0430\u043a\u043e\u0432,\n            \u0430 \u0441\u0435\u0439\u0447\u0430\u0441 \u0443\u0436\u0435 ".concat(t.length)):(console.log("\u043e\u0442\u043f\u0440\u0430\u0432\u0438\u043b\u0438 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435",(0,E.XW)()),u((0,Z.bG)(t)),o(""))}else alert("\u041f\u0443\u0441\u0442\u043e\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u043d\u0435\u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c!")};return(0,k.jsxs)("div",{children:[(0,k.jsx)("div",{children:(0,k.jsx)("textarea",{style:{height:"100px",width:"250px"},onChange:function(n){o(n.target.value)},value:s,placeholder:'Press Ctrl + Enter to send a message or button "Send".\nYou can\'t send more than 100 symbols.',onKeyPress:function(n){if(n.ctrlKey&&"Enter"===n.code){if(l)return void console.log("\u0445\u043e\u0442\u0435\u043b \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u0447\u0435\u0440\u0435\u0437 Ctrl + Enter \u0432 \u043c\u043e\u043c\u0435\u043d\u0442 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f");p()}}})}),(0,k.jsx)("div",{children:e?"":"Chat works only for login users!"}),(0,k.jsx)("div",{children:l?(0,k.jsx)(S,{}):(0,k.jsx)("button",{onClick:function(){p()},children:"Send"})})]})},U=function(){var n=(0,C.v9)(w.J);return(0,k.jsx)("div",{children:(0,k.jsx)("div",{children:n?(0,k.jsx)(P,{}):(0,k.jsx)(I,{isAuth:n})})})}},821:function(n,e,t){var r=t(6050),i=/^\s+/;n.exports=function(n){return n?n.slice(0,r(n)+1).replace(i,""):n}},6050:function(n){var e=/\s/;n.exports=function(n){for(var t=n.length;t--&&e.test(n.charAt(t)););return t}},8573:function(n,e,t){var r=t(8092),i=t(72),a=t(2582),s=Math.max,o=Math.min;n.exports=function(n,e,t){var c,u,l,p,f,d,v=0,m=!1,g=!1,h=!0;if("function"!=typeof n)throw new TypeError("Expected a function");function x(e){var t=c,r=u;return c=u=void 0,v=e,p=n.apply(r,t)}function y(n){return v=n,f=setTimeout(j,e),m?x(n):p}function N(n){var t=n-d;return void 0===d||t>=e||t<0||g&&n-v>=l}function j(){var n=i();if(N(n))return b(n);f=setTimeout(j,function(n){var t=e-(n-d);return g?o(t,l-(n-v)):t}(n))}function b(n){return f=void 0,h&&c?x(n):(c=u=void 0,p)}function S(){var n=i(),t=N(n);if(c=arguments,u=this,d=n,t){if(void 0===f)return y(d);if(g)return clearTimeout(f),f=setTimeout(j,e),x(d)}return void 0===f&&(f=setTimeout(j,e)),p}return e=a(e)||0,r(t)&&(m=!!t.leading,l=(g="maxWait"in t)?s(a(t.maxWait)||0,e):l,h="trailing"in t?!!t.trailing:h),S.cancel=function(){void 0!==f&&clearTimeout(f),v=0,c=d=u=f=void 0},S.flush=function(){return void 0===f?p:b(i())},S}},72:function(n,e,t){var r=t(7009);n.exports=function(){return r.Date.now()}},2582:function(n,e,t){var r=t(821),i=t(8092),a=t(152),s=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,c=/^0o[0-7]+$/i,u=parseInt;n.exports=function(n){if("number"==typeof n)return n;if(a(n))return NaN;if(i(n)){var e="function"==typeof n.valueOf?n.valueOf():n;n=i(e)?e+"":e}if("string"!=typeof n)return 0===n?n:+n;n=r(n);var t=o.test(n);return t||c.test(n)?u(n.slice(2),t?2:8):s.test(n)?NaN:+n}}}]);
//# sourceMappingURL=458.9d40f1a8.chunk.js.map