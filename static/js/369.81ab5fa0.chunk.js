"use strict";(self.webpackChunkmy_app1=self.webpackChunkmy_app1||[]).push([[369],{2369:function(e,s,t){t.r(s),t.d(s,{default:function(){return V}});var r=t(1413),i=t(5671),n=t(3144),o=t(136),a=t(7277),l=t(2791),c=t(885),u="ProfileInfo_descriptionBlock__rQo20",d="ProfileInfo_userPhoto__wxBp2",h="ProfileInfo_profileBlock__7+UG8",p="ProfileInfo_contact__REoC8",x="ProfileInfo_buttonCancel__bWPK3",j=t(9013),f=t(184),v=function(e){var s=(0,l.useState)(!1),t=(0,c.Z)(s,2),r=t[0],i=t[1],n=(0,l.useState)(e.status),o=(0,c.Z)(n,2),a=o[0],u=o[1];(0,l.useEffect)((function(){u(e.status)}),[e.status]);return(0,f.jsxs)("div",{children:[!r&&(0,f.jsxs)("div",{children:[(0,f.jsx)("b",{children:"Status"}),(0,f.jsx)("span",{children:": "}),(0,f.jsx)("span",{onDoubleClick:function(){i(!0)},children:e.status})]}),r&&(0,f.jsx)("div",{children:(0,f.jsx)("input",{autoFocus:!0,onBlur:function(){i(!1),e.updateStatus(a)},onChange:function(e){u(e.currentTarget.value)},value:a})})]})},m=t(8478),b=t(5304),g=t(5705),P=t(7942),S=t(4805),_=P.Ry().shape({fullName:P.Z_().min(2,"Must be longer than 2 characters !").max(25,"Must be shorter than 5 characters !").required("Required !"),lookingForAJobDescription:P.Z_().min(2,"Must be longer than 2 characters !").max(50,"Must be shorter than 5 characters !").required("Required !"),aboutMe:P.Z_().min(2,"Must be longer than 2 characters !").max(50,"Must be shorter than 5 characters !").required("Required !")}),k=function(e){var s=e.profile,t=e.handleSubmit,r=e.goToViewMode,i=JSON.parse(JSON.stringify(s)),n=Object.keys(s.contacts);return n.forEach((function(e){null===i.contacts[e]&&(i.contacts[e]="")})),(0,f.jsxs)("div",{children:[(0,f.jsx)("div",{children:"..."}),(0,f.jsx)(g.J9,{initialValues:i,validationSchema:_,onSubmit:function(e,s){var i=s.setStatus,n=s.setSubmitting;t(e,i,n,r)},children:function(e){var s=e.status,t=e.isSubmitting;return(0,f.jsxs)(g.l0,{children:[(0,f.jsx)("div",{children:(0,f.jsx)(g.gN,{name:"fullName",type:"text",placeholder:"Full name"})}),(0,f.jsx)(g.Bc,{name:"fullName",children:b.Y}),(0,f.jsx)("div",{children:(0,f.jsx)("br",{})}),(0,f.jsxs)("div",{children:[(0,f.jsx)(g.gN,{name:"lookingForAJob",type:"checkbox",id:"lookingForAJob"}),(0,f.jsxs)("label",{htmlFor:"lookingForAJob",children:[(0,f.jsx)("b",{children:" Looking for a job"})," "]})]}),(0,f.jsx)("div",{children:(0,f.jsx)("br",{})}),(0,f.jsx)("div",{children:(0,f.jsx)(g.gN,{name:"lookingForAJobDescription",as:"textarea",placeholder:"My professional skills"})}),(0,f.jsx)(g.Bc,{name:"lookingForAJobDescription",children:b.Y}),(0,f.jsx)("div",{children:(0,f.jsx)("br",{})}),(0,f.jsx)("div",{children:(0,f.jsx)(g.gN,{name:"aboutMe",as:"textarea",placeholder:"About me"})}),(0,f.jsx)(g.Bc,{name:"aboutMe",children:b.Y}),(0,f.jsx)("div",{children:(0,f.jsx)("br",{})}),(0,f.jsxs)("div",{children:[(0,f.jsx)("b",{children:"Contacts"}),":"]}),(0,f.jsx)(g.F2,{name:"friends",render:function(){return(0,f.jsx)("div",{children:n.map((function(e){return function(e){return(0,f.jsxs)("div",{className:p,children:[(0,f.jsxs)("div",{children:[(0,f.jsx)("b",{children:e}),":"]}),(0,f.jsx)("div",{children:(0,f.jsx)(g.gN,{name:"contacts.".concat(e),type:"text",id:e,placeholder:e})})]},e)}(e)}))})}}),(0,f.jsx)("div",{children:(0,f.jsx)("br",{})}),s&&(0,f.jsx)("div",{className:S.Z.validationErrorMessage,children:(0,f.jsxs)("b",{children:[" ..",s," - with setStatus "]})}),(0,f.jsx)("button",{type:"submit",disabled:t,children:t?"Please wait...":"Save"}),(0,f.jsx)("button",{onClick:r,type:"button",className:x,children:" Cancel"})]})}}),(0,f.jsx)("div",{children:"..."}),(0,f.jsx)("div",{children:(0,f.jsx)("br",{})})]})},y=function(e){var s=e.profile,t=e.isOwner,r=e.goToEditMode;return(0,f.jsxs)("div",{children:[(0,f.jsx)("div",{children:t&&(0,f.jsx)("button",{onClick:r,children:"Edit"})}),(0,f.jsxs)("div",{children:[(0,f.jsx)("b",{children:" Full name"}),": ",s.fullName]}),(0,f.jsxs)("div",{children:[(0,f.jsx)("b",{children:" Looking for a job"}),": ",s.lookingForAJob?"yes":"no"]}),s.lookingForAJob&&(0,f.jsxs)("div",{children:[(0,f.jsx)("b",{children:" My professional skills"}),": ",s.lookingForAJobDescription]}),(0,f.jsxs)("div",{children:[(0,f.jsx)("b",{children:" About me"}),": ",s.aboutMe]}),(0,f.jsxs)("div",{children:[(0,f.jsx)("b",{children:" Contacts"}),":",Object.keys(s.contacts).map((function(e){return(0,f.jsx)(M,{contactTitle:e,contactValue:s.contacts[e]},e)}))]})]})},M=function(e){var s=e.contactTitle,t=e.contactValue;return(0,f.jsxs)("div",{className:p,children:[(0,f.jsxs)("b",{children:[" ",s]}),": ",t]})},N=function(e){var s=(0,l.useState)(!1),t=(0,c.Z)(s,2),r=t[0],i=t[1],n=e.profile,o=e.saveProfile;if(!n)return(0,f.jsx)(j.Z,{});var a="photo_".concat(n.userId);return(0,f.jsx)("div",{children:(0,f.jsxs)("div",{className:u,children:[(0,f.jsx)("img",{src:null!==n.photos.large?n.photos.large:m,className:d,alt:a}),(0,f.jsxs)("div",{children:[n.fullName," - userId - ",n.userId]}),(0,f.jsx)("div",{children:e.isOwner&&(0,f.jsx)("input",{type:"file",onChange:function(s){var t;null!==(t=s.target.files)&&void 0!==t&&t.length&&e.savePhoto(s.target.files[0])}})}),(0,f.jsxs)("div",{className:h,children:[r?(0,f.jsx)(k,{profile:n,handleSubmit:function(e,s,t,r){o(e,s,t,r)},goToViewMode:function(){return i(!1)}}):(0,f.jsx)(y,{profile:n,isOwner:e.isOwner,goToEditMode:function(){return i(!0)}}),(0,f.jsx)(v,{status:e.status,updateStatus:e.updateStatus})]})]})})},A=t(364),w=t(4294),C=t(2982),I="MyPosts_postsBlock__tpHam",F="MyPosts_posts__sKDcq",Z="MyPosts_text_h3__wvADx",J="Post_item__C5ylc",T=function(e){return(0,f.jsxs)("div",{className:J,children:[(0,f.jsx)("img",{src:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQ4AuCaCDS8eeLRXGL0pFD9cIddYuHc8AJoSA&usqp=CAU",alt:"Post-illustration"}),"... ",e.value,(0,f.jsxs)("div",{children:["Like ",e.likesCount]})]})},q=function(e){var s=P.Ry().shape({newPostText:P.Z_().min(2,"Must be longer than 2 characters !").max(5,"Must be shorter than 5 characters !").required("Required !")});return(0,f.jsx)(g.J9,{initialValues:{newPostText:""},validationSchema:s,onSubmit:function(s,t){var r=t.resetForm;!function(s){e.addPost(s)}(s.newPostText),r()},children:function(){return(0,f.jsxs)(g.l0,{children:[(0,f.jsx)("div",{children:(0,f.jsx)(g.gN,{name:"newPostText",as:"textarea",placeholder:"enter text 1"})}),(0,f.jsx)(g.Bc,{name:"newPostText",children:b.Y}),(0,f.jsx)("button",{type:"submit",children:"Add posts"})]})}})},U=function(e){var s=(0,C.Z)(e.posts).reverse().map((function(e){return(0,f.jsx)(T,{value:e.message,likesCount:e.likesCount},e.id)}));return(0,f.jsxs)("div",{className:I,children:[(0,f.jsx)("h3",{className:Z,children:"My posts:"}),(0,f.jsx)(q,{addPost:e.addPost}),(0,f.jsx)("div",{className:F,children:s})]})},D=(0,A.$j)((function(e){return{posts:e.profilePage.posts}}),{addPost:w.Nw.addPostActionCreator})(U),O=function(e){return(0,f.jsxs)("div",{children:[(0,f.jsx)(N,(0,r.Z)({},e)),(0,f.jsx)(D,{})]})},B=t(6871),R=t(7781),E=function(e){(0,o.Z)(t,e);var s=(0,a.Z)(t);function t(e){var r;return(0,i.Z)(this,t),(r=s.call(this,e)).state={isShowMyProfile:!0},r}return(0,n.Z)(t,[{key:"componentDidMount",value:function(){var e=+this.props.router.params.userId,s=this.props.authorisedUserId;e?(this.props.getUserProfile(e),this.props.getStatus(e)):this.props.isAuth&&s&&(this.props.getUserProfile(s),this.props.getStatus(s))}},{key:"componentDidUpdate",value:function(e,s){var t=+this.props.router.params.userId,r=this.props.authorisedUserId;this.state.isShowMyProfile&&(t===r&&this.setState({isShowMyProfile:!1}),!t&&this.props.isAuth&&r&&(this.props.getUserProfile(r),this.props.getStatus(r),this.setState({isShowMyProfile:!1})))}},{key:"render",value:function(){if(!this.props.isAuth&&!this.props.router.params.userId)return(0,f.jsx)(B.Fg,{to:"/login"});var e=+this.props.router.params.userId,s=this.props.authorisedUserId,t=!1;return(!e&&this.props.isAuth||e===s)&&(t=!0),(0,f.jsx)("div",{children:(0,f.jsx)(O,{profile:this.props.profile,status:this.props.status,updateStatus:this.props.updateStatus,isOwner:t,savePhoto:this.props.savePhoto,saveProfile:this.props.saveProfile})})}}]),t}(l.Component);var V=(0,R.qC)((function(e){return function(s){var t=(0,B.TH)(),i=(0,B.s0)(),n=(0,B.UO)();return(0,f.jsx)(e,(0,r.Z)((0,r.Z)({},s),{},{router:{location:t,navigate:i,params:n}}))}}),(0,A.$j)((function(e){return{profile:e.profilePage.profile,status:e.profilePage.status,authorisedUserId:e.auth.id,isAuth:e.auth.isAuth}}),{getUserProfile:w.et,getStatus:w.lR,updateStatus:w.Nf,savePhoto:w.Ju,saveProfile:w.Ii}))(E)}}]);
//# sourceMappingURL=369.81ab5fa0.chunk.js.map